# System Contracts

系统合约： 表现形式和智能合约一致，随系统启动生成，是系统功能的一部分。

一种方式： 提前写入 genesis 创世块。

需要支持 code & storage 升级。

## 前提

* `sys_call` 接口可以调用系统合约
* `hook` 可以对交易进行处理

*两种方式：依赖内部协议或者链协议*

## 系统合约设计

通过 sys_hub 作为链上稳定存在一个入口，对系统合约进行统一管理，

* 注册管理
* 升级管理
* 权限管理

1. 使用链协议

前提： 链有本身的 protocol version 概念，并且也是一种系统合约
跟随 protocol version 对整个系统进行统一的版本管理，
坏处是可能会有少量的数据冗余（系统数据量少可以接受）

```
                    |                sys_hub            |
                    |                                   |
    +----------+    |   +--------- +    +---------+     |   | - sys_contract1
    | sys_call | ---+-> | sys_cont | -> | version | ->  +-> | - sys_contract2
    +----------+    |   +--------- +    +---------+     |   | - sys_contract3
                    |                                   |
                    |                   +------------+  |
                    |                   | permission |  |
                    |                   +------------+  |
```

2. 使用系统合约内部自定义协议


